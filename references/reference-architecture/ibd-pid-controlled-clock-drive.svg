<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="467px" preserveAspectRatio="none" style="width:1612px;height:467px;" version="1.1" viewBox="0 0 1612 467" width="1612px" zoomAndPan="magnify"><defs><filter height="300%" id="ff5jc00yhsza3" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[210d5ed7a3b98e841174e0e22ae10cdb]
cluster ibd [System] PID-Controlled Clock Drive [Data Flow] ]--><rect fill="#FFFFFF" filter="url(#ff5jc00yhsza3)" height="425" style="stroke: #000000; stroke-width: 1.5;" width="1579" x="22" y="24"/><path d="M448,25 L448,33.2969 L438,43.2969 L22,43.2969 " fill="none" style="stroke: #000000; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="416" x="25" y="37.9951">ibd [System] PID-Controlled Clock Drive [Data Flow] ]</text><!--MD5=[b3b444921c8b4ce57d1ac277af47b801]
cluster G--><rect fill="#FFFFFF" filter="url(#ff5jc00yhsza3)" height="332" style="stroke: #000000; stroke-width: 1.5;" width="778" x="277" y="67"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="121" x="605.5" y="81.9951">«microcontroller»</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="109" x="611.5" y="98.292">PID Controller</text><!--MD5=[4257423e334641e537ffa92160115f43]
cluster H--><rect fill="#FFFFFF" filter="url(#ff5jc00yhsza3)" height="229" style="stroke: #000000; stroke-width: 1.5;" width="171" x="1406" y="136"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="1414" y="150.9951">Motor Drive System</text><!--MD5=[fe438d1f4f8e9d5c7b4fbab750bc347c]
entity rtc--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="38" y="59"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33" y="64"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="33" y="85.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="48" y="81.9951">Real Time Clock (RTC)</text><!--MD5=[91d9cb3fe8da25a9d94a8d1c8a5537e3]
entity serial_bus_rtc--><ellipse cx="134" cy="156" fill="#FEFECE" filter="url(#ff5jc00yhsza3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="95" y="185.9951">Serial Bus</text><!--MD5=[00179af9bc14e048fef3c02ab7970256]
entity pwm--><ellipse cx="1249" cy="184" fill="#FEFECE" filter="url(#ff5jc00yhsza3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="156" x="1171" y="213.9951">Motor Speed (PWM)</text><!--MD5=[be730da0fa030af7835659de9639f112]
entity ra--><ellipse cx="1491" cy="393" fill="#FEFECE" filter="url(#ff5jc00yhsza3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="211" x="1385.5" y="422.9951">Right Ascension (RA) Shaft</text><!--MD5=[95aea0a53efb618fc569ece1197781df]
entity encoder--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="1178" y="378"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1173" y="383"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1173" y="404.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="122" x="1188" y="400.9951">Rotory Encoder</text><!--MD5=[bc4a969ff08a2eaa91c6da3075656cca]
entity serial_bus_encoder--><ellipse cx="916.5" cy="424" fill="#FEFECE" filter="url(#ff5jc00yhsza3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="78" x="877.5" y="453.9951">Serial bus</text><!--MD5=[01ef136a8cd3f2d1aeb5d71059498911]
entity serial_read_rtc--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="323" y="118"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="123"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="144.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="333" y="140.9951">t = serial.read(rtc_pin)</text><!--MD5=[cc4c567705907bcfd41ffb3d7ff8b844]
entity theta_r--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="257" x="293" y="189"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="288" y="194"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="288" y="215.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="237" x="303" y="211.9951">Reference Angle, theta_r(t-t0)</text><!--MD5=[e32773a0da76c445e84e5885468a4484]
entity e--><ellipse cx="421.5" cy="286" fill="#FEFECE" filter="url(#ff5jc00yhsza3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="61" x="391" y="315.9951">error, e</text><!--MD5=[7d46d6cd919e02e6168a09ad91eae8b4]
entity u--><ellipse cx="916.5" cy="245" fill="#FEFECE" filter="url(#ff5jc00yhsza3)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="145" x="844" y="274.9951">Control variable, u</text><!--MD5=[e36a11a12b620da16044f2fd4cd93201]
entity pwm_gen--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="856.5" y="165"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="851.5" y="170"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="851.5" y="191.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="100" x="866.5" y="187.9951">pwm.duty(u)</text><!--MD5=[c05673ed0df25619424a6f9de288c317]
entity serial_read_encoder--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="245" x="794" y="344"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="789" y="349"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="789" y="370.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="804" y="366.9951">n = serial.read(encoder_pin)</text><!--MD5=[ed3f4e453fd7f496a8f255d1c0b67525]
entity theta--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="197" x="323" y="347"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="352"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="318" y="373.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="177" x="333" y="369.9951">Output Angle, theta(n)</text><!--MD5=[be5750da26e06623bc49653cefaf97c7]
entity p--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="75" x="628.5" y="294"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="623.5" y="299"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="623.5" y="320.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="55" x="638.5" y="316.9951">K_p * e</text><!--MD5=[c807758c2e9e0d1754c3d4b69a0f6713]
entity i--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="615" y="223"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="610" y="228"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="610" y="249.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="82" x="625" y="245.9951">K_i * de*dt</text><!--MD5=[011db1d27274c86691871bc51b12beb8]
entity d--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="613" y="152"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="608" y="157"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="608" y="178.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="86" x="623" y="174.9951">K_d * de/dt</text><!--MD5=[21b7ecfcf7fc031bbfae6c4dcbc60101]
entity drive--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="112" x="1435" y="171"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1430" y="176"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1430" y="197.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="92" x="1445" y="193.9951">motor drive</text><!--MD5=[8d6760d652c677979d4712a0f3854444]
entity motor--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="1457.5" y="242"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1452.5" y="247"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1452.5" y="268.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="1467.5" y="264.9951">motor</text><!--MD5=[2088bddee7b207db8f57d8431ec125a1]
entity gearbox--><rect fill="#FEFECE" filter="url(#ff5jc00yhsza3)" height="36.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="1448.5" y="313"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1443.5" y="318"/><rect fill="#FEFECE" height="5" style="stroke: #A80036; stroke-width: 1.5;" width="10" x="1443.5" y="339.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="1458.5" y="335.9951">gearbox</text><!--MD5=[5ba437009d88a482ad156e6fbc9375f0]
reverse link e to theta_r--><path d="M421.5,271.77 C421.5,258.73 421.5,239.36 421.5,225.2 " fill="none" id="e&lt;-theta_r" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.5,276.94,425.5,267.94,421.5,271.94,417.5,267.94,421.5,276.94" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="404.5" y="255.5669">+</text><!--MD5=[c4367ad9f45d960972e7542a6a912add]
link e to p--><path d="M430.57,286.87 C460.16,290.04 564.11,301.18 623.17,307.52 " fill="none" id="e-&gt;p" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="628.39,308.07,619.8774,303.1167,623.4195,307.5272,619.009,311.0694,628.39,308.07" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[a185da4cb047bb69466c81d1f9f92ad2]
link e to i--><path d="M430.57,284.5 C458.07,279.4 549.74,262.39 609.97,251.21 " fill="none" id="e-&gt;i" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="614.97,250.28,605.3914,247.9887,610.0539,251.192,606.8506,255.8545,614.97,250.28" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[e242a9fb4540aaf3741aa3229240ce97]
link e to d--><path d="M430.87,283.11 C459.23,273.32 550,242 550,242 C550,242 589,205 589,205 C589,205 604.14,198.03 620.9,190.31 " fill="none" id="e-&gt;d" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="625.66,188.12,615.8119,188.24,621.116,190.2062,619.1498,195.5104,625.66,188.12" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[612215d5b06a51f8bcf4a4eadfbee5b8]
link p to u--><path d="M703.67,302.11 C760.03,286.92 865.31,258.53 902.27,248.57 " fill="none" id="p-&gt;u" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="907.21,247.24,897.4796,245.7173,902.3819,248.5399,899.5594,253.4422,907.21,247.24" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="752" y="283.0669">+</text><!--MD5=[4fb6e00de6d63d7bacb858425dac4551]
link i to u--><path d="M717.29,241.81 C775.47,242.75 867.68,244.23 902.02,244.78 " fill="none" id="i-&gt;u" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="907.39,244.87,898.4599,240.7163,902.3907,244.7843,898.3228,248.7151,907.39,244.87" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="752" y="239.0669">+</text><!--MD5=[71a63e2c05af7b0bc37f889eaddfd503]
link d to u--><path d="M714.65,188.01 C750.69,201.63 794,218 794,218 C794,218 870.58,235.02 902.15,242.03 " fill="none" id="d-&gt;u" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="907.15,243.14,899.232,237.2829,902.2691,242.0553,897.4966,245.0924,907.15,243.14" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="11" x="752" y="199.0669">+</text><!--MD5=[773f693c59583fb39ecd6e922ba1fe22]
link u to pwm_gen--><path d="M916.5,235.63 C916.5,230.17 916.5,224.33 916.5,224.33 C916.5,224.33 916.5,213.19 916.5,206.26 " fill="none" id="u-&gt;pwm_gen" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="916.5,201.13,912.5,210.13,916.5,206.13,920.5,210.13,916.5,201.13" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[55e9cd31b940c1ac06d889e09b6043ee]
reverse link theta_r to serial_read_rtc--><path d="M421.5,183.74 C421.5,183.48 421.5,183.33 421.5,183.33 C421.5,183.33 421.5,159.67 421.5,159.67 C421.5,159.67 421.5,157.36 421.5,154.18 " fill="none" id="theta_r&lt;-serial_read_rtc" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.5,188.82,425.5,179.82,421.5,183.82,417.5,179.82,421.5,188.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[12105290172d9494048af6b8d30668b1]
link theta to e--><path d="M421.5,346.68 C421.5,332.64 421.5,313.53 421.5,300.54 " fill="none" id="theta-&gt;e" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="421.5,295.37,417.5,304.37,421.5,300.37,425.5,304.37,421.5,295.37" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="407.5" y="325.5669">-</text><!--MD5=[16a32cc78219c0a40a5684040984b20d]
reverse link theta to serial_read_encoder--><path d="M525.31,364.37 C603.55,363.9 711.46,363.24 793.98,362.74 " fill="none" id="theta&lt;-serial_read_encoder" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="520.2,364.41,529.2341,368.3325,525.1998,364.367,529.1653,360.3328,520.2,364.41" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8805fedeee4c6cc35145965b3921f244]
link serial_bus_rtc to rtc--><path d="M134,146.94 C134,134.37 134,111.39 134,95.2 " fill="none" id="serial_bus_rtc-rtc" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="92.5" y="125.5669">«SPI/I2C»</text><!--MD5=[7ebdfb376876873fee62cb9383076377]
link serial_bus_rtc to serial_read_rtc--><path d="M143.24,155.42 C169.57,153.58 254,147.66 322.85,142.84 " fill="none" id="serial_bus_rtc-serial_read_rtc" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[0812df24127a64610885a8247f2d063c]
link pwm_gen to pwm--><path d="M976.59,183.18 C1055.84,183.42 1191.58,183.83 1234.55,183.96 " fill="none" id="pwm_gen-&gt;pwm" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1239.76,183.98,1230.7715,179.9543,1234.76,183.9657,1230.7486,187.9543,1239.76,183.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[752c72a1e0e286e88fd7aaaa3778ced5]
reverse link motor to drive--><path d="M1491,236.74 C1491,236.48 1491,236.33 1491,236.33 C1491,236.33 1491,212.67 1491,212.67 C1491,212.67 1491,210.36 1491,207.18 " fill="none" id="motor&lt;-drive" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1491,241.82,1495,232.82,1491,236.82,1487,232.82,1491,241.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[438850e27b210e28590b2b601a50b320]
reverse link gearbox to motor--><path d="M1491,307.74 C1491,307.48 1491,307.33 1491,307.33 C1491,307.33 1491,283.67 1491,283.67 C1491,283.67 1491,281.36 1491,278.18 " fill="none" id="gearbox&lt;-motor" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1491,312.82,1495,303.82,1491,307.82,1487,303.82,1491,312.82" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[397e8682bd16cc05f570c8ea6c4810cf]
link pwm to drive--><path d="M1258.26,184.17 C1284.9,184.73 1370.27,186.51 1429.6,187.74 " fill="none" id="pwm-&gt;drive" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1434.9,187.85,1425.9818,183.6708,1429.901,187.75,1425.8218,191.6692,1434.9,187.85" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6808d634b72dd6a2921f7200cd964c2b]
reverse link ra to gearbox--><path d="M1491,378.59 C1491,375.09 1491,372.33 1491,372.33 C1491,372.33 1491,351.67 1491,351.67 C1491,351.67 1491,350.68 1491,349.13 " fill="none" id="ra&lt;-gearbox" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1491,383.63,1495,374.63,1491,378.63,1487,374.63,1491,383.63" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[f474ad76e4c9f02b797d5cea3ad4a08e]
reverse link encoder to ra--><path d="M1325.27,395.06 C1383.25,394.33 1457.51,393.41 1481.86,393.1 " fill="none" id="encoder&lt;-ra" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="1320.06,395.12,1329.1051,399.0169,1325.0597,395.0629,1329.0137,391.0174,1320.06,395.12" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[39ca404df132807ba61dfd1ec51ead3e]
link serial_bus_encoder to serial_read_encoder--><path d="M916.5,414.63 C916.5,409.17 916.5,403.33 916.5,403.33 C916.5,403.33 916.5,382.67 916.5,382.67 C916.5,382.67 916.5,381.68 916.5,380.13 " fill="none" id="serial_bus_encoder-serial_read_encoder" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[433bbeae210b26b3d52d53e50919ac58]
link serial_bus_encoder to encoder--><path d="M925.67,423.31 C959.86,420.41 1093.61,409.08 1177.71,401.96 " fill="none" id="serial_bus_encoder-encoder" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="60" x="1072" y="402.0669">«SPI/I2C»</text><!--MD5=[e01c6a14a9a1403ae43832d0f8682c10]
@startuml
left to right direction
skinparam linetype polyline

frame "ibd [System] PID-Controlled Clock Drive [Data Flow] ]" {

  component "<b>Real Time Clock (RTC)</b>" as rtc

  rectangle "<b>PID Controller</b>" <<microcontroller>> as G {
left to right direction
skinparam linetype polyline

component "<b>t = serial.read(rtc_pin)</b>" as serial_read_rtc
component "<b>Reference Angle, theta_r(t-t0)</b>" as theta_r

interface "<b>error, e</b>" as e
together {
  component "<b>K_p * e</b>" as p
  component "<b>K_i * de*dt</b>" as i
  component "<b>K_d * de/dt</b>" as d
}

e <- theta_r : +

e - -> p
e - -> i
e - -> d

interface "<b>Control variable, u</b>" as u
p - -> u : +
i - -> u : +
d - -> u : +

component "<b>pwm.duty(u)</b>" as pwm_gen
u -> pwm_gen

component "<b>n = serial.read(encoder_pin)</b>" as serial_read_encoder
component "<b>Output Angle, theta(n)</b>" as theta

theta_r <- serial_read_rtc
theta -> e : -
theta <- - - serial_read_encoder

  }

  interface "<b>Serial Bus</b>" as serial_bus_rtc
  serial_bus_rtc . rtc : <<SPI/I2C>>
  serial_bus_rtc - - serial_read_rtc

  interface "<b>Motor Speed (PWM)</b>" as pwm
  pwm_gen - -> pwm

  rectangle "<b>Motor Drive System</b>" as H {
    component "<b>motor drive</b>" as drive
    component "<b>motor</b>" as motor
    component "<b>gearbox</b>" as gearbox
    motor <- drive
    gearbox <- motor
  }

  pwm ..> drive

  interface "<b>Right Ascension (RA) Shaft</b>" as ra
  component "<b>Rotory Encoder</b>" as encoder
  interface "<b>Serial bus</b>" as serial_bus_encoder

  ra <. gearbox
  encoder <.. ra

  serial_bus_encoder - serial_read_encoder
  serial_bus_encoder .. encoder : <<SPI/I2C>>
}
@enduml

PlantUML version 1.2020.06(Sun Apr 05 07:38:32 CDT 2020)
(APACHE source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.10+9-Ubuntu-0ubuntu1.20.04
Operating System: Linux
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>